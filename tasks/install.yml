---
- include_tasks: install-Debian.yml
  when: ansible_os_family in ["Debian", "Ubuntu"]

- name: Ensure that Elasticsearch data directory is owned by Elasticsearch
  file:
    path: "{{ elasticsearch_data_dir_path }}"
    owner: "{{ elasticsearch_user }}"
    group: "{{ elasticsearch_group }}"
    mode: 02750
  notify: Restart Elasticsearch

- name: Ensure Elasticsearch service is enabled
  service:
    name: elasticsearch
    enabled: "{{ elasticsearch_service_enabled }}"
  notify: Restart Elasticsearch
